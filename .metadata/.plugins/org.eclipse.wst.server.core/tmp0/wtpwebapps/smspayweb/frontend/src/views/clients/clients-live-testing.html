<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/vaadin-grid/src/vaadin-grid.html">
<link rel="import" href="../../components/header-filtering-component.html">
<link rel="import" href="../../../bower_components/vaadin-button/src/vaadin-button.html">
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../styles/shared-styles.html">
<link rel="import" href="../../../bower_components/vaadin-lumo-styles/badge.html">
<link rel="import" href="../../components/tests-with-scheduler-form.html">
<link rel="import" href="../../components/zero-content.html">




<dom-module id="clients-live-testing">
    <template>
<style include="shared-styles lumo-badge">

	:host{
		display: block;
		width: 100%;
		height: 100%;
	}
	
	.main{
		display: flex;
		flex-wrap: wrap;
    	align-items: flex-start;
    	flex-direction: column;
    	
    	justify-content: space-around;
    	
		width: 100%; 
		height: calc(100vh - 64px);
		
	}
	
	.edit{
		display: flex;
		flex-direction: column;
		width: calc(100% - 2 * var(--lumo-space-m));
		flex: 0.7;
		overflow: auto;
		margin: var(--lumo-space-xs) var(--lumo-space-m);
		
		position: relative;
		
		/* adds animation for all transitions */ 
		-webkit-transition: .25s ease-in-out; 
		-moz-transition: .25s ease-in-out; 
		-o-transition: .25s ease-in-out; 
		transition: .25s ease-in-out;  
		
		
	}
	
	.edit[hidden]{
		display: none !important;
	}
	
	tests-with-scheduler-form{
		display: flex;
		flex-direction: column;
		width: 100%;
		height: 100%;
		
	}
	
	.test-actions{
	    padding: var(--lumo-space-s);
		display: flex;
		justify-content: center;
		width: calc(100% - 2 * var(--lumo-space-m));
	}
	
	.test-form{
		width: 100%;
		flex: 1 1 auto;
	}
	
	.form-caption {
		padding: var(--lumo-space-s);
		font-family: var(--lumo-font-family);
		font-size: 16px;
		font-weight: 500;
	}
	
	.grid-header-wrapper {
   		border-radius: 4px 4px 0 0 ;
   		border-bottom: 1px solid var(--lumo-contrast-10pct);
	} 
	
	
	.header{
		width: 100%;
	}
	
	.tests-container{
		position: relative;
		flex: 2; 
		width: calc(100% - 2 * var(--lumo-space-m));
   	    margin: var(--lumo-space-s) calc(var(--lumo-space-m));
   		border-radius: var(--lumo-border-radius);
    	box-shadow: var(--lumo-box-shadow-s);
    	display: flex;
   	    flex-direction: column;
   	    overflow: hidden;
   	    
	}
	
	#show-edit-btn{
		position: absolute;
		top: var(--lumo-space-xs);
		z-index: 10;
		background: transparent;
		padding: 0 var(--lumo-space-xs);
		min-width: auto;
		margin: 0 var(--lumo-space-xs);
	}
	
	
	.grid-wrapper{
		flex: 1;
		border-radius: var(--lumo-border-radius);
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
	}
	
	.grid-tests{
		height: 100% !important;
		
	}
	
	.info-text{
		display: block;
		width: calc(100% - 2 * var(--lumo-space-s));
		padding: var(--lumo-space-s);
		padding-top: var(--lumo-space-m);
		padding-bottom: 0px;
		text-align: center;
		font-family: var(--lumo-font-family);
		font-size: 14px;
		font-weight: 400;	
		align-self: center;
	}
	
	
	.error-text{
		font-size: var(--lumo-font-size-xs);
    	line-height: var(--lumo-line-height-xs);
    	color: var(--lumo-error-text-color);
	}
	
	.error-10pct {
       background-color: var(--lumo-error-color-10pct);
       color: var(--lumo-error-text-color);
       padding: 0 var(--lumo-space-xs) ;
       border-radius: var(--lumo-border-radius);
    }
    
    .primary-10pct {
       background-color: var(--lumo-primary-color-10pct);
       color: var(--lumo-primary-text-color);
       padding: 0 var(--lumo-space-xs) ;
       border-radius: var(--lumo-border-radius);
    }
    
    .contrast-10pct {
       background-color: var(--lumo-contrast-10pct);
       border-radius: var(--lumo-border-radius);
       padding: 0 var(--lumo-space-xs) ;
    }
    
    
    @media (max-width: 1000px) and (min-width: 641px){
    
    	:host{
			height: 100%;
			overflow: auto;
		}
    
    
        .main {
           display: inline-block;
        } 
       
		
		.grid-wrapper{
			min-height: 360px !important;
		}
		
		#show-edit-btn{
			position: relative;
			width: 100%;
			height: var(--lumo-size-xs);
		}
		
		.grid-tests{
			height: auto !important;
		}
		
    }
    
    @media (max-width: 640px){
    
    	:host{
			height: 100%;
			overflow: auto;
		}
		
		.main {
           display: inline-block;
       } 
    
      	.tests-container{
			min-width: 330px;
			
		}
		
		.grid-wrapper{
			min-height: 360px !important;
		}
		
		.grid-header-wrapper{
			text-align: center;
		}
		
		#show-edit-btn{
			position: relative;
			width: 100%;
			background: var(--lumo-primary-color) !important;
		    color: #fff !important;
		    border-radius: 50%;
		    width: var(--lumo-size-m);
		    height: var(--lumo-size-m);
		    padding: 0 var(--lumo-space-xs);
		    opacity: 0.9;
		}
		
		.grid-tests{
			height: auto !important;
		}
    
    }
	

</style>
<div class="main" id="main">
 <div class="edit" id="edit">
  <tests-with-scheduler-form id="testsWithSchedulerForm"></tests-with-scheduler-form>
  <div id="edit-content" style="display: none">
   <div id="create-wrapper">
    <label id="form-caption" class="form-caption">Create new test</label>
    <span id="info-text" class="info-text">Number of tests to run: <b>[[testsCount]]</b></span>
    <div id="test-actions" class="test-actions">
     <vaadin-button theme="primary success" id="run-btn" class="run-btn">
       Run 
     </vaadin-button>
     <vaadin-button theme="primary" id="schedule-btn" class="schedule-btn">
       Schedule 
     </vaadin-button>
    </div>
   </div>
   <div id="schedule-wrapper">
    <label class="form-caption">Schedule</label>
    <span id="scheduler-error-text" class="error-text">Number of tasks for schedule:</span>
    <span id="scheduler-info-text" class="info-text">Number of tasks for schedule:<b>[[taskCount]]</b></span>
    <div id="scheduler-actions" class="test-actions">
     <vaadin-button theme="secondary" id="back">
      <iron-icon icon="lumo:arrow-left"></iron-icon>Back 
     </vaadin-button>
     <vaadin-button theme="secondary error" id="cancel" class="run-btn">
       Cancel 
      <iron-icon icon="lumo:cross"></iron-icon>
     </vaadin-button>
     <vaadin-button theme="primary success" id="save-schedule-btn" class="schedule-btn">
       Save 
     </vaadin-button>
    </div>
   </div>
  </div>
 </div>
 <div id="tests-container" class="tests-container">
  <div id="grid-header-wrapper" class="grid-header-wrapper">
   <vaadin-button id="show-edit-btn">
    <iron-icon icon="lumo:angle-up" id="toggleGridIcon"></iron-icon>
   </vaadin-button>
   <header-filtering-component id="header" class="header"></header-filtering-component>
  </div>
  <div id="grid-wrapper" class="grid-wrapper">
   <vaadin-grid items="[[items]]" id="grid-tests" theme="rounded-rows-grid compact small wrap-cell-content" class="grid-tests"></vaadin-grid>
   <zero-content id="zero-content"></zero-content>
  </div>
 </div>
</div>
</template>
    <script>
        class ClientsLiveTesting extends Polymer.Element {
            static get is() {
                return 'clients-live-testing';
            }
            static get properties() {
                return {
                    // Declare your properties here.
                };
            }
        }
        customElements.define(ClientsLiveTesting.is, ClientsLiveTesting);
    </script>
</dom-module>